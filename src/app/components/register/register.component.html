<div class="min-h-screen bg-gray-100 flex items-center justify-center p-4">
  <div class="w-full max-w-lg bg-white p-8 rounded-lg shadow-md">
    <form [formGroup]="registrationForm" (ngSubmit)="onSubmit()" class="space-y-6">
      <div class="grid gap-6 md:grid-cols-3">
        <!-- Username -->
        <div>
          <label for="username" class="block mb-2 text-sm font-medium text-gray-900">
            Username
          </label>
          <input
            type="text"
            id="username"
            formControlName="username"
            class="w-full p-2.5 border rounded-lg text-sm bg-gray-50 focus:ring-blue-500 focus:border-blue-500 {{ isFieldInvalid('username') ? 'border-red-500' : 'border-gray-300' }}"
            placeholder="johndoe"
            aria-describedby="usernameError"
          />
          <div *ngIf="isFieldInvalid('username')" id="usernameError" class="text-red-500 text-xs mt-1">
            <div *ngIf="f['username'].errors?.['required']">Username is required</div>
            <div *ngIf="f['username'].errors?.['minlength']">Username must be at least 3 characters</div>
          </div>
        </div>

        <!-- First Name -->
        <div>
          <label for="firstName" class="block mb-2 text-sm font-medium text-gray-900">
            First Name
          </label>
          <input
            type="text"
            id="firstName"
            formControlName="firstName"
            class="w-full p-2.5 border rounded-lg text-sm bg-gray-50 focus:ring-blue-500 focus:border-blue-500 {{ isFieldInvalid('firstName') ? 'border-red-500' : 'border-gray-300' }}"
            placeholder="John"
            aria-describedby="firstNameError"
          />
          <div *ngIf="isFieldInvalid('firstName')" id="firstNameError" class="text-red-500 text-xs mt-1">
            <div *ngIf="f['firstName'].errors?.['required']">First name is required</div>
            <div *ngIf="f['firstName'].errors?.['minlength']">First name must be at least 2 characters</div>
          </div>
        </div>

        <!-- Last Name -->
        <div>
          <label for="lastName" class="block mb-2 text-sm font-medium text-gray-900">
            Last Name
          </label>
          <input
            type="text"
            id="lastName"
            formControlName="lastName"
            class="w-full p-2.5 border rounded-lg text-sm bg-gray-50 focus:ring-blue-500 focus:border-blue-500 {{ isFieldInvalid('lastName') ? 'border-red-500' : 'border-gray-300' }}"
            placeholder="Doe"
            aria-describedby="lastNameError"
          />
          <div *ngIf="isFieldInvalid('lastName')" id="lastNameError" class="text-red-500 text-xs mt-1">
            <div *ngIf="f['lastName'].errors?.['required']">Last name is required</div>
            <div *ngIf="f['lastName'].errors?.['minlength']">Last name must be at least 2 characters</div>
          </div>
        </div>
      </div>

      <!-- Email -->
      <div>
        <label for="email" class="block mb-2 text-sm font-medium text-gray-900">
          Email Address
        </label>
        <input
          type="email"
          id="email"
          formControlName="email"
          class="w-full p-2.5 border rounded-lg text-sm bg-gray-50 focus:ring-blue-500 focus:border-blue-500 {{ isFieldInvalid('email') ? 'border-red-500' : 'border-gray-300' }}"
          placeholder="john.doe@company.com"
          aria-describedby="emailError"
        />
        <div *ngIf="isFieldInvalid('email')" id="emailError" class="text-red-500 text-xs mt-1">
          <div *ngIf="f['email'].errors?.['required']">Email is required</div>
          <div *ngIf="f['email'].errors?.['email']">Invalid email format</div>
        </div>
      </div>

      <!-- Phone -->
      <div>
        <label for="phone" class="block mb-2 text-sm font-medium text-gray-900">
          Phone Number
        </label>
        <input
          type="tel"
          id="phone"
          formControlName="phone"
          class="w-full p-2.5 border rounded-lg text-sm bg-gray-50 focus:ring-blue-500 focus:border-blue-500 {{ isFieldInvalid('phone') ? 'border-red-500' : 'border-gray-300' }}"
          placeholder="123-45-678"
          aria-describedby="phoneError"
        />
        <div *ngIf="isFieldInvalid('phone')" id="phoneError" class="text-red-500 text-xs mt-1">
          <div *ngIf="f['phone'].errors?.['required']">Phone number is required</div>
          <div *ngIf="f['phone'].errors?.['pattern']">Phone must be in format 123-45-678</div>
        </div>
      </div>

      <!-- Password -->
      <div>
        <label for="password" class="block mb-2 text-sm font-medium text-gray-900">
          Password
        </label>
        <input
          type="password"
          id="password"
          formControlName="password"
          class="w-full p-2.5 border rounded-lg text-sm bg-gray-50 focus:ring-blue-500 focus:border-blue-500 {{ isFieldInvalid('password') ? 'border-red-500' : 'border-gray-300' }}"
          placeholder="••••••••"
          aria-describedby="passwordError"
        />
        <div *ngIf="isFieldInvalid('password')" id="passwordError" class="text-red-500 text-xs mt-1">
          <div *ngIf="f['password'].errors?.['required']">Password is required</div>
          <div *ngIf="f['password'].errors?.['minlength']">Password must be at least 8 characters</div>
        </div>
      </div>

      <!-- Confirm Password -->
      <div>
        <label for="confirmPassword" class="block mb-2 text-sm font-medium text-gray-900">
          Confirm Password
        </label>
        <input
          type="password"
          id="confirmPassword"
          formControlName="confirmPassword"
          class="w-full p-2.5 border rounded-lg text-sm bg-gray-50 focus:ring-blue-500 focus:border-blue-500 {{ isFieldInvalid('confirmPassword') ? 'border-red-500' : 'border-gray-300' }}"
          placeholder="••••••••"
          aria-describedby="confirmPasswordError"
        />
        <div *ngIf="isFieldInvalid('confirmPassword') || registrationForm.errors?.['passwordMismatch']" id="confirmPasswordError" class="text-red-500 text-xs mt-1">
          <div *ngIf="f['confirmPassword'].errors?.['required']">Please confirm your password</div>
          <div *ngIf="registrationForm.errors?.['passwordMismatch']">Passwords do not match</div>
        </div>
      </div>

      <!-- Address -->
      <div>
        <label for="address" class="block mb-2 text-sm font-medium text-gray-900">
          Address
        </label>
        <input
          type="text"
          id="address"
          formControlName="address"
          class="w-full p-2.5 border rounded-lg text-sm bg-gray-50 focus:ring-blue-500 focus:border-blue-500 {{ isFieldInvalid('address') ? 'border-red-500' : 'border-gray-300' }}"
          placeholder="123 Main St"
          aria-describedby="addressError"
        />
        <div *ngIf="isFieldInvalid('address')" id="addressError" class="text-red-500 text-xs mt-1">
          <div *ngIf="f['address'].errors?.['required']">Address is required</div>
        </div>
      </div>

      <!-- Terms Checkbox -->
      <div class="flex items-start">
        <div class="flex items-center h-5">
          <input
            type="checkbox"
            id="terms"
            formControlName="terms"
            class="w-4 h-4 border border-gray-300 rounded bg-gray-50 focus:ring-3 focus:ring-blue-300"
            aria-describedby="termsError"
          />
        </div>
        <label for="terms" class="ms-2 text-sm font-medium text-gray-900">
          I agree with the
          <a href="#" class="text-blue-600 hover:underline">terms and conditions</a>
        </label>
      </div>
      <div *ngIf="submitted && f['terms'].errors?.['required']" id="termsError" class="text-red-500 text-xs">
        You must agree to the terms and conditions
      </div>

      <!-- Error Message -->
      <div *ngIf="errorMessage" class="text-red-500 text-sm text-center">
        {{ errorMessage }}
      </div>

      <!-- Submit Button -->
      <button
        type="submit"
        [disabled]="isSubmitting"
        class="w-full text-white bg-blue-700 hover:bg-blue-800 focus:ring-4 focus:outline-none focus:ring-blue-300 font-medium rounded-lg text-sm px-5 py-2.5 text-center disabled:bg-gray-400"
      >
        {{ isSubmitting ? 'Submitting...' : 'Submit' }}
      </button>
    </form>
  </div>
</div>
